{% extends "layout.html" %}

{% block content %}
<h2>Playbook{% if playbook.name %} "{{playbook.name}}"{% endif %}</h2>

<table>
  <tr>
    <th>Start</th>
    <th>End</th>
    <th>Duration</th>
  </tr>

  <tr>
    <td>{{playbook.time_start}}</td>
    <td>{{playbook.time_end}}</td>
    <td>{{playbook.duration}}</td>
  </tr>
</table>

<h2>Statistics</h2>

<table>
  <tr>
    <th>Host</th>
    <th>Ok</th>
    <th>Changed</th>
    <th>Failed</th>
    <th>Skipped</th>
    <th>Unreachable</th>
  </tr>

  {% for stat in playbook.stats %}
  <tr>
    <td>{{ make_link('playbook_host',
      stat.host.name, playbook=playbook.id, host=stat.host.name) }}</td>
    <td>{{ stat.ok }}</td>
    <td>{{ stat.changed }}</td>
    <td>{{ stat.failed }}</td>
    <td>{{ stat.skipped }}</td>
    <td>{{ stat.unreachable }}</td>
  </tr>
  {% endfor %}
</table>

<h2>Plays</h2>

<table>
  <tr>
    <th>Start</th>
    <th>End</th>
    <th>Duration</th>
    <th></th>
  </tr>

  {% for play in playbook.plays.order_by('time_start') %}
  <tr>
    <td>{{playbook.time_start}}</td>
    <td>{{playbook.time_end}}</td>
    <td>{{playbook.duration}}</td>
    <td>{{make_link('play', 'details',
      play=play.id)}}</td>
  </tr>
  {% endfor %}
</table>

<h2>Tasks</h2>
<table class="playbook-tasks">
  <tr>
    <th>Start</th>
    <th>End</th>
    <th>Duration</th>
    <th>Action</th>
    <th>File</th>
    <th>Line</th>
    <th></th>
  </tr>

  {% for task in playbook.tasks.order_by('time_start') %}
  <tr>
    <td>{{task.time_start}}</td>
    <td>{{task.time_end}}</td>
    <td>{{task.duration}}</td>
    <td>{{task.action}}</td>
    <td>{{task.path}}</td>
    <td>{{task.lineno}}</td>
    <td>
      {{make_link('task', 'details',
      task=task.id)}}
    </td>
  </tr>
  {% endfor %}
</table>

</table>
{% endblock %}
